<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 88: Building and Packaging a Desktop App - The Rust Adventure</title>
    <link rel="stylesheet" href="../style.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <header>
        <div class="container">
            <img src="https://www.rust-lang.org/static/images/rust-logo-blk.svg" alt="Rust Logo" class="logo">
            <h1>Module 88: Building and Packaging a Desktop App</h1>
        </div>
    </header>

    <main>
        <div class="container">
            <article class="module-content">
                <h2>Objective: To use the `cargo tauri build` command to compile, bundle, and package our application into a native, distributable installer for the user's operating system.</h2>
                <p>A development server is great, but it's not how you give an application to your users. The final step of the Tauri workflow is to create a production build. The <strong><code>cargo tauri build</code></strong> command is a powerful tool that automates this entire process, creating a professional-looking installer that your users can download and run.</p>
                
                <hr>

                <h3>Step 1: The Build Process</h3>
                <p>When you run `cargo tauri build`, a series of steps happens automatically:</p>
                <ol>
                    <li>It builds your frontend code (HTML, CSS, JS) in release/production mode. This typically involves minification and optimization.</li>
                    <li>It compiles your Rust backend core in release mode, using all the optimizations we learned about on Day 22.</li>
                    <li>It "bundles" the frontend assets directly into the final Rust executable. This means your entire application becomes a single, self-contained binary file.</li>
                    <li>It takes this binary and packages it into the native installer format for your current operating system.</li>
                </ol>

                <h3>Step 2: Native Installer Formats</h3>
                <p>The output of the build command is platform-specific:</p>
                <ul>
                    <li>On <strong>Windows</strong>, it produces an <code>.msi</code> installer.</li>
                    <li>On <strong>macOS</strong>, it produces a <code>.app</code> bundle inside a <code>.dmg</code> disk image.</li>
                    <li>On <strong>Linux</strong>, it produces a <code>.deb</code> package (for Debian/Ubuntu) and an <code>.AppImage</code> (which is a portable format for many Linux distributions).</li>
                </ul>
                <p>This means if you want to distribute your app for all three major operating systems, you will typically need to run the build command on each of those systems (often using a CI/CD service like GitHub Actions).</p>

                <h3>Step 3: Configuring the Bundle</h3>
                <p>Most of the configuration for your final application bundle is done in the <strong><code>src-tauri/tauri.conf.json</code></strong> file. Here you can set things like:</p>
                <ul>
                    <li>The application's unique identifier (e.g., `com.mycompany.myapp`).</li>
                    <li>The application icon.</li>
                    <li>The version number of your application.</li>
                    <li>And much more.</li>
                </ul>

                <h3>Practical Application: Building and Distributing our Greeter App</h3>
                <p>Let's create a final, distributable version of our `tauri_hello` application.</p>

                <h4>1. (Optional) Set an Icon</h4>
                <p>Find a small icon file (<code>.ico</code> on Windows, <code>.icns</code> on macOS, or a <code>.png</code> for all platforms). Place it in your `src-tauri/` directory. Then, update your `src-tauri/tauri.conf.json` to point to it:</p>
                <pre><code>// In src-tauri/tauri.conf.json
"tauri": {
  "bundle": {
    "icon": [
      "icons/32x32.png",
      "icons/128x128.png",
      "icons/icon.icns", // Your icon paths here
      "icons/icon.ico"
    ],
    // ...
  }
}
</code></pre>
                <p>Tauri has a command to help generate all the needed icon sizes from a single PNG: <code>cargo tauri icon /path/to/my_icon.png</code>.</p>
                
                <h4>2. Run the Build Command</h4>
                <p>From the root of your `tauri_hello` project, run the build command. This will take several minutes, as it's performing a full release build.</p>
                <pre><code>cargo tauri build</code></pre>
                
                <h4>3. Find and Run the Installer</h4>
                <p>Once the command finishes, it will tell you where it placed the final artifacts. The path will be something like:</p>
                <p><code>src-tauri/target/release/bundle/</code></p>
                <p>Navigate to that directory. Inside, you will find the installer for your platform!</p>
                <ul>
                    <li>On Windows, you'll see a file like <code>tauri_hello_0.0.0_x64_en-US.msi</code>.</li>
                    <li>On macOS, you'll see a <code>.dmg</code> file.</li>
                    <li>On Linux, you'll see a <code>.deb</code> and an <code>.AppImage</code>.</li>
                </ul>
                <p>Double-click the installer and install your application just like any other native desktop app. After it's installed, you will find "Hello Tauri!" in your computer's list of installed applications. Launch it!</p>

                <p>The application will open, and it will be completely self-contained. It is no longer running from a development server; the HTML and JS assets are being served directly from the Rust binary. It's a real, distributable, cross-platform desktop application.</p>

                <h4>The Deployment Workflow:</h4>
                <p>You have now completed the full development lifecycle of a desktop application:</p>
                <ol>
                    <li><strong>Scaffolding (`create-tauri-app`):</strong> Creating the initial project structure.</li>
                    <li><strong>Development (`cargo tauri dev`):</strong> Writing code with a fast, iterative workflow and live-reloading.</li>
                    <li><strong>Deployment (`cargo tauri build`):</strong> Compiling and packaging the final product into a distributable format for end-users.</li>
                </ol>
                <p>Congratulations on completing Day 25! You have learned how to leverage your existing web development skills and combine them with the power of Rust to build fast, secure, and modern cross-platform desktop applications.</p>

                <a href="../index.html" class="back-link">&larr; Back to Curriculum Map</a>
            </article>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 The Rust Adventure.</p>
        </div>
    </footer>

</body>
</html>